extends VBoxContainer

@export var verbose_logs := false

## https://github.com/SamuelLanders/Godot_4x_RandomNamesGenerator/blob/main/addons/randomnamesgenerator/names_in_arrays.gd
var random_names := [
	'Aabha','Aaliyah','Aalt','Aaltje','Aanandini','Aba','Ababuo','Abagbe','Abam','Abame','Abana','Abarrane','Abayomi','Abbie','Abby','Abebi','Abedabun','Abeke','Abelia','Abella','Abelle','Abellona','Abena','Abeo','Abequa','Abey','Abeytu','Abeytzi','Abha','Abhaa','Abi','Abia','Abida','Abidemi','Abigail','Abimbola','Abinkanile','Abiona','Abir','Abmaba','Abra','Acacia','Acadia','Acaija','Acantha','Accalia','Aceline','Acenith','Achala','Achalaa','Achsa','Achsah','Acima','Ada','Adah','Adalheid','Adalheidis','Adalia','Adaliah','Adalina','Adamina','Adamma','Adan','Adanna','Adar','Adara','Addalah','Addiah','Addie','Addula','Ade','Adebola','Adedagbo','Adelaide','Adele','Adeleke','Adelind','Adelinda','Adeline','Adella','Adelpha','Adena','Adeola','Aderes','Aderet','Adesimbo','Adesina','Adhika','Adhita','Adia','Adiba','Adiella','Adila','Adilah','Adima','Adin','Adina','Adinah','Adine','Adira','Adiran','Aditi','Adiva','Adlai','Admete','Adola','Adolpha','Adoncia','Adonia','Adora','Adorabelle','Adoree','Adoria','Adorna','Adowa','Adra','Adrastea','Adrea','Adria','Adriah','Adrian','Adriana','Adriane','Adrianna','Adriannah','Adriano','Adrie','Adriena','Adrienne','Adryan','Adsila','Aduke','Aida','Aimee','Aisha','Alaina','Alana','Alanis','Alannah','Alberta','Aleida','Alessa','Alessandra','Alexa','Alexandra','Alfreda','Alice','Alicia','Alida','Aline','Alisha','Alyosha','Alyssa','Amanda','Amber','Amelia','Amy','Anada','Andrea','Andreia','Andrina','Angela','Angelina','Angie','Aniela','Anila','Ann','Anna','Annabel','Annabelle','Annie','Antoinette','Antonia','Antonina','Anuja','Anya','April','Ardala','Arlene','Augustina','Ava','Avichayil','Avigail','Avijah','Avira','Avital','Beatrice','Belinda','Benita','Bertha','Beth','Bethan','Bethany','Bonnie','Brenda','Brenna','Briana','Brianna','Bronislava','Brooke','Bryany','Bryna','Cacia','Caitlin','Cara','Carla','Carlene','Carly','Carrie','Casey','Casia','Cassie','Catherine','Celina','Cerys','Charlene','Charley','Charlize','Charlotte','Chelsea','Chloe','Christel','Christina','Christine','Clara','Claudette','Cleva','Connie','Cosima','Cosma','Courtney','Cristina','Cristine','Crystal','Daisy','Dalina','Daline','Damiana','Danette','Daniela','Danielle','Danita','Darcy','Davida','Davina','Dayna','Deanna','Deborah','Deeanna','Del','Delina','Della','Delly','Delyne','Demi','Denisa','Denise','Dericka','Diana','Dina','Djamila','Dola','Donalda','Doncia','Donella','Donna','Dora','Dori','Dory','Ebony','Edelie','Edeline','Eden','Edith','Edwarda','Eleanor','Elena','Elfreda','Eline','Elise','Eliza','Elizabeth','Ella','Ellen','Ellie','Eloise','Elsie','Elvina','Emelie','Emilia','Emily','Emma','Emmanuella','Emmanuelle','Erin','Erna','Esme','Estebana','Esther','Etta','Eugina','Eva','Eve','Evelyn','Evie','Faith','Fannie','Farzaneh','Fatima','Faustina','Faustine','Faye','Fedora','Fernanda','Ffion','Fifi','Filippa','Florence','Frances','Francesca','Freda','Fredrica','Fredrika','Freya','Gabriella','Gabrielle','Gael','Gail','Genie','Georgia','Georgina','Geraldine','Giulia','Grace','Guillelmina','Hadria','Hadrian','Hadrienne','Hannah','Harriet','Hasna','Hattie','Hazel','Heather','Heidi','Hella','Hennie','Henrietta','Henrika','Hollie','Holly','Imogen','India','Isabel','Isabella','Isabelle','Isla','Isobel','Jade','Jaime','Jakoba','Jamesina','Jamia','Jamie','Jamilyn','Janey','Janie','Jasmine','Jemima','Jenna','Jennifer','Jerica','Jessica','Jessie','Jetta','Jo','Joel','Josephe','Josephine','Joy','Juana','Jude','Judith','Judy','Julia','Juliana','Justeen','Justeene','Justine','Justyne','Kate','Katherine','Kathleen','Kathryn','Katie','Kayla','Kayleigh','Keira','Keitha','Kelly','Kelsey','Kevia','Khalila','Kiera','Kirsti','Klaudie','Kristina','Kristy','Lady','Lara','Latoya','Laura','Lauren','Laurie','Layla','Leah','Lena','Leona','Leondra','Leondrea','Leonela','Libby','Lillian','Lillie','Lilly','Lily','Lina','Linda','Lisa','Lois','Lola','Lottie','Louella','Louise','Lovisa','Lucy','Lulu','Lydia','Maddison','Madeleine','Madison','Mae','Maisie','Marcelina','Marcia','Marcie','Margaret','Margie','Maria','Marie','Martha','Martina','Marva','Marvina','Mary','Maryam','Mathilda','Mathilde','Matilda','Matilde','Maurisa','Maxima','Maxine','Maya','Megan','Melissa','Mia','Michaela','Michelle','Miliana','Millie','Mina','Mollie','Molly','Morgan','Nancy','Nannie','Naomi','Natalie','Natasha','Nelly','Niamh','Nicia','Nicola','Nicole','Nicoletta','Nicolette','Nigella','Nikol','Nikolett','Nikolia','Norma','Olivia','Paige','Patricia','Paula','Paulina','Pauline','Pavlina','Peta','Petra','Petrina','Philippa','Phoebe','Poppy','Posy','Rachel','Rebecca','Rhonda','Rihanna','Roberta','Robyn','Rosa','Rose','Rosie','Ruby','Ruth','Ryana','Ryanne','Sadie','Samantha','Sandra','Sara','Sarah','Savannah','Scarlett','Sebastia','Shannon','Sharlene','Shawna','Simone','Skye','Sofia','Sophia','Sophie','Stella','Steph','Stephanie','Stephie','Stina','Sue','Summer','Tam','Tammy','Tara','Taura','Taylor','Tegan','Teresa','Thea','Theodora','Thomasina','Thyra','Tia','Tiffany','Tilly','Tommy','Toni','Toya','Traci','Tyler','Vanessa','Vasilisa','Velma','Victoria','Victorine','Vitoria','Wilhelmina','Willie','Wilma','Yaroslava','Yasmin','Zahra','Zainab','Zandra','Zara','Zlata','Zlatica','Zoe',
	'Aadi','Aaditva','Aakav','Aakesh','Aakil','Aalok','Aamin','Aanan','Aandaleeb','Aaron','Aatmadeva','Aatmik','Ab','Abad','Abarran','Abayomi','Abba','Abbas','Abbe','Abbey','Abbott','Abby','Abda','Abdel','Abdul','Abdullah','Abe','Abeeku','Abejide','Abel','Abelard','Abey','Abhiraja','Abia','Abid','Abie','Abija','Abijah','Abiodun','Abiola','Abir','Abishai','Able','Abna','Abnar','Abner','Abnor','Abornazine','Abraham','Abrahamo','Abrahan','Abram','Abrami','Abramo','Abran','Absalom','Absolon','Ace','Acer','Acestes','Achaius','Acharon','Achates','Achav','Achazia','Achaziah','Achazya','Achazyahu','Achban','Achelous','Acher','Acheron','Achida','Achill','Achille','Achillea','Achilles','Achim','Achimelech','Achisar','Achishar','Achiya','Achiyahu','Acie','Acim','Ackerleigh','Ackerley','Ackleigh','Ackley','Actaeon','Acton','Ad','Adad','Adael','Adaia','Adaiah','Adair','Adal','Adalar','Adalard','Adalfieri','Adalric','Adam','Adamnan','Adamo','Adams','Adamya','Adan','Adao','Adapa','Adar','Adare','Adaya','Addae','Addam','Addie','Addis','Addison','Addy','Ade','Adebayo','Adeben','Adejola','Adel','Adelar','Adelard','Adelric','Adesola','Adhamh','Adhamhnan','Adheesha','Adhideva','Adib','Adiel','Adika','Adil','Adin','Adio','Adir','Adiran','Adisa','Adisson','Aditsan','Aditya','Adiv','Adlai','Adlar','Adler','Adley','Admon','Adnah','Adnan','Adnet','Adney','Adnot','Adoeete','Adoerte','Adofo','Adolfo','Adolfus','Adolph','Adolphe','Adom','Adon','Adonia','Adoniah','Adonijah','Adonis','Adoniya','Adoniyah','Adooeette','Adrea','Adri','Adria','Adrian','Adriana','Adriane','Adriano','Adrie','Adriel','Adryan','Adunbi','Adusa','Adwele','Ahab','Aharon','Ahaziah','Ahaziahu','Ahia','Ahiah','Ahimelech','Ahishar','Ahmed','Akil','Akilles','Alan','Albert','Alex','Alexander','Alfred','Alvin','Andrew','Angelo','Angelus','Anil','Anthony','Anton','Anuj','Archie','Ardal','Ari','Arin','Arlen','Arny','Arthur','Augustus','Austin','Aviah','Avida','Aviel','Avimelech','Avisha','Avner','Avram','Avrom','Barrie','Barry','Ben','Benito','Benjamin','Bob','Bobby','Bornbazine','Bradley','Bram','Brandan','Brandon','Brendan','Brian','Bronislaw','Brooke','Bryan','Burt','Caleb','Callum','Carl','Casey','Charles','Charley','Charlie','Christian','Christophe','Christopher','Claude','Claudius','Cliff','Cole','Connor','Conor','Cosmo','Craig','Cristiano','Curtis','Damian','Daniel','Danny','David','Dean','Declan','Del','Denis','Dennis','Derek','Dewey','Dolph','Dolphus','Dominic','Donald','Douglas','Eb','Ebby','Ebner','Ebony','Eddie','Eden','Edward','Edwin','Emil','Emiliano','Emmanuel','Eric','Erin','Ernest','Esteban','Ethan','Euan','Eugene','Ewan','Faith','Farzan','Faust','Faustino','Fernando','Frances','Frank','Fraser','Fred','Freddie','Frederick','Garfield','Gary','Garyn','George','Georgie','Gerald','Gregory','Grover','Hadria','Hadrian','Hadrienne','Hamza','Haroun','Harrison','Harry','Harvey','Hassan','Helge','Henry','Homer','Hugh','Hugo','Ibrahim','Isaac','Islay','Jack','Jackson','Jacob','Jade','Jaime','Jaimi','Jake','Jakob','James','Jamie','Jamil','Jared','Jason','Jasper','Jenkins','Jeremy','Jessie','Jim','Jimi','Jimmy','Jo','Joe','Joel','John','Johnny','Jonathan','Joseph','Josh','Joshua','Juan','Judah','Julio','Julius','Justin','Keith','Kelly','Kelsey','Kenneth','Kevin','Khalil','Kyle','Lara','Lawrence','Leo','Leon','Leonard','Leonardo','Lewis','Liam','Lloyd','Louis','Lucas','Luis','Luke','Maddison','Madison','Marc','Marcello','Marcus','Mario','Mark','Martin','Martine','Marvin','Matt','Matthew','Maurice','Max','Maximilian','Maximus','Maxwell','Melvin','Michael','Mike','Miles','Mitchell','Mohamed','Mohammad','Mohammed','Morgan','Muhammad','Muhammed','Myles','Nathan','Nathaniel','Neil','Nicholas','Nick','Nicolas','Nigel','Noah','Norman','Oliver','Omar','Oscar','Owen','Patrick','Paul','Peter','Philip','Phillip','Ralph','Raymond','Reuben','Rhys','Richard','Robert','Robyn','Ron','Ronnie','Roosevelt','Roy','Russell','Ryan','Samuel','Sara','Scott','Sean','Sebastian','Seth','Shannon','Simon','Sonny','Sophus','Stanley','Stephen','Steve','Steven','Stevie','Taurus','Taylor','Tegan','Terika','Theo','Theodore','Thomas','Timothy','Tobias','Tom','Tommy','Tony','Travis','Tristan','Tyler','Tyr','Vasiliy','Victor','Vincent','Walter','Warren','Wilhelm','Will','William','Willie','Yaroslav','Yusuf','Zac','Zachary','Zack','Zak','Zlatan',
	'Adams','Alexander','Allen','Alvarez','Anderson','Andrews','Armstrong','Arnold','Bailey','Baker','Barnes','Bell','Bennett','Berry','Black','Blaese','Bradley','Brooks','Brown','Bryant','Burns','Butler','Campbell','Carter','Castillo','Chapman','Chavez','Clark','Cole','Coleman','Collins','Cook','Cooper','Cox','Crawford','Cruz','Cunningham','Davis','Diaz','Dixon','Duncan','Dunn','Edwards','Elliott','Ellis','Evans','Ferguson','Fisher','Flores','Ford','Foster','Fox','Freeman','Garcia','Gardner','Gibson','Gonzales','Gonzalez','Gordon','Graham','Grant','Gray','Green','Griffin','Gutierrez','Hall','Hamilton','Harper','Harris','Harrison','Hart','Hawkins','Hayes','Henderson','Henry','Hernandez','Herrera','Hill','Holmes','Howard','Hudson','Hughes','Hunt','Hunter','Jackson','James','Jenkins','Jimenez','Johnson','Johnston','Jones','Jordan','Kelley','Kelly','Kennedy','Kim','King','Knight','Lane','Lawrence','Lee','Lewis','Long','Lopez','Lynch','Marshall','Martin','Mason','Matthews','Mcdonald','Medina','Mendoza','Meyer','Miller','Mills','Mitchell','Moore','Morales','Morgan','Morris','Morrison','Murphy','Murray','Nelson','Nguyen','O\'Brien','O\'Connor','O\'Doherty','O\'Gallagher','O\'Moore','O\'Neill','O\'Quinn','O\'Reilly','O\'Ryan','O\'Sullivan','Olson','Ortiz','Owens','Palmer','Parker','Patel','Patterson','Payne','Perry','Phillips','Porter','Powell','Price','Ramirez','Ramos','Reed','Reid','Reyes','Reynolds','Rice','Richards','Richardson','Riley','Rivera','Roberts','Robertson','Robinson','Rodriguez','Rogers','Romero','Rose','Ross','Ruiz','Russell','Ryan','Sanchez','Sanders','Scott','Shaw','Simmons','Simpson','Smith','Snyder','Spencer','Stephens','Stevens','Stewart','Stone','Sullivan','Taylor','Thomas','Thompson','Trelawney','Tucker','Turner','Vasquez','Wagner','Walker','Wallace','Walsh','Ward','Warren','Washington','Watson','Webb','Wells','West','White','Williams','Willis','Wilson','Wood','Woods','Wright','Young','Zule',
	]

@onready var player_text = $player_custom/MarginContainer/main/player/player_text
@onready var color_picker = $player_custom/MarginContainer/main/player/color_picker
@onready var player_name = $player_custom/MarginContainer/main/player_name

@onready var player_custom_panel = $player_custom


func _ready():
	set_process(false)
	Global.begin_game.connect( _custom_startup )
	
func _custom_startup():
	color_picker.value_changed.connect( func(_c): _apply_selected_color() )
	
	color_picker.value = ( randf_range( 0, 1 ) ) # select random image
	_apply_selected_color()
	
	player_name.placeholder_text = random_names.pick_random()
	
	## Apply default data to player data
	Network.player_data[Network.NAME] = player_name.placeholder_text.capitalize()
	if multiplayer.is_server():
		Network.player_data[Network.NAME] += " (S)" # S for server
	Network.player_data[Network.COLOR] = _get_selected_color()

func _get_selected_color() -> Color:
	return Color.from_hsv( color_picker.value, 1.0, 1.0 )

func _apply_selected_color():
	player_text.modulate = _get_selected_color()
	color_picker.modulate = _get_selected_color()

func _on_display_panel_toggled(toggled_on : bool):
	player_custom_panel.visible = toggled_on

func _on_color_picker_drag_ended(value_changed : bool):
	if value_changed:
		Network.player_data[Network.COLOR] = _get_selected_color()
		if verbose_logs:
			print("player color changed to ",_get_selected_color())

func _on_player_name_text_changed(new_text : String):
	Network.player_data[Network.NAME] = new_text.capitalize()
	if verbose_logs:
		print("player name changed to ",new_text)
